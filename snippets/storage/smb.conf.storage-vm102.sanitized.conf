# Storage VM (VM102) - /etc/samba/smb.conf (sanitized excerpt)
# Note: IPs/usernames removed or generalized.

[global]
   server role = standalone server
   workgroup = WORKGROUP
   security = user

   bind interfaces only = no

   smb ports = 445
   server min protocol = SMB3
   server max protocol = SMB3

   server signing = mandatory

   load printers = no
   disable spoolss = yes

# RW shares (service-specific identities)
[Nextcloud]
   path = /mnt/mergerfs/Nextcloud
   valid users = <svc-nextcloud>
   read only = no
   force user = storage
   force group = storage
   create mask = 0660
   directory mask = 0770

[Vaultwarden]
   path = /mnt/mergerfs/Vaultwarden
   valid users = <svc-vaultwarden>
   read only = no
   force user = storage
   force group = storage
   create mask = 0660
   directory mask = 0770

# RO consumer shares (least privilege)
[media-jf]
   path = /mnt/mergerfs
   valid users = <svc-jellyfin>
   read only = yes
   browseable = no

[media-abs]
   path = /mnt/mergerfs
   valid users = <svc_audiobookshelf>
   read only = yes
   browseable = no

[Books-service]
   path = /mnt/mergerfs/Books
   valid users = <svc_books>
   read only = yes
   browseable = no
